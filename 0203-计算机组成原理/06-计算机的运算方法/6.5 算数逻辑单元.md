
# ALU电路

组合逻辑电路，无存储

| ![300](../../attachment/png/Pasted%20image%2020240228133019.png) |
| ------------------------------------------------------------ |

$A_i$; $B_i$：数据输入
$K_i$：控制输入
$F_i$：输出结果

四位ALU 74181

| ![500](../../attachment/png/Pasted%20image%2020240228133453.png) |
| ------------------------------------------------------------ |

M=0：算数运算
M=1：逻辑运算
S_3\sim S_9：不同取值可做不同运算

# 快速进位链

进位链时影响运算器速度的主要原因

## 并行加法器

![700](../../attachment/png/Pasted%20image%2020240228133640.png)
由n+1个全加器组合成
从
$$S_i=\overline{A_i}\overline{B_i}C_{i-1}+\overline{A_i}B_i\overline{C_{i-1}}+A_i\overline{B_i}\overline{C_{i-1}}+A_iB_iC_{i-1}$$
中可看出 $C_i$ 的结果会影响下级的结果，而 $C_i$ 的运算为
$$C_i=\overline{A_i}B_iC_{i-1}+A_i\overline{B_i}C_{i-1}+A_iB_i\overline{C_{i-1}}+A_iB_iC_{i-1}$$
为了减少$C_i$运算的影响，可通过逻辑运算规则简化，可得到
$$C_i=A_iB_i+(A_i+B_i)C_{i-1}$$
其中用$d_i=A_iB_i$表示本地进位，$t_i=A_i+B_i$表示传送条件，则$C_i=d_i+t_iC_{i-1}$

## 串行进位链

- 进位链：传送进位的电路
- 串行进位链：进位串行传送

以4位全加器为例，每位进位表达式为：
$$
\begin{array}{crl}
C_0&=&d_0+t_0C_{-1}=\overline{\overline{d_0}\cdot\overline{t_0C_{-1}}}\\
C_1&=&d_1+t_1C_{0}\\
C_2&=&d_2+t_2C_{1}\\
C_3&=&d_3+t_3C_{2}\\
\end{array}
$$
为了简化电路，将逻辑转换为与非逻辑，则$C_i=\overline{\overline{d_i}\cdot\overline{t_iC_{i-1}}}$
!电路图](../../attachment/Pasted%20image 20240228141732.png)

- n位全加器产生进位的全部时间为$2nt_y$
- 时间过长

## 并行进位链

并行进位链：n位加法器的进位同时产生，也成为跳跃进位

以4位加法器为例
$$
\begin{eqnarray}
C_0&=&d_0+t_0C_{-1}\\
C_1&=&d_1+t_1C_{0}=d_1+t_1d_0+t_1t_0C_{-1} //将C_0带入 \\
C_2&=&d_2+t_2C_{1}=d_2+t_2d_1+t_2t_1d_0+t_2t_1t_0c_{-1}\\
C_3&=&d_3+t_3C_{2}=d_3+t_3d_2+t_3t_2d_1+t_3t_2t_1d_0+t_3t_2t_1t_0c_{-1}\\
\end{eqnarray}
$$
![20240228151520](../../attachment/png/Pasted%20image%2020240228151520.png)

- 设与或非门的延迟时间为$1.5t_y$
- 当$d_it_i$形成后，只需$2.5t_y$产生全部进位
- 但是电路过于复杂

### 单重分组跳跃进位链

n位全加器分若干小组，小组中的进位同时产生，小组与小组之间采用串行进位

以n=16为例
![20240228153226](../../attachment/png/Pasted%20image%2020240228153226.png)
当$d_i,t_i$形成后

- 经$2.5t_y$，产生$C_3\sim C_0$
- 经$5t_y$，产生$C_7\sim C_4$
- 经$7.5t_y$，产生$C_11\sim C_8$
- 经$10t_y$，产生$C_15\sim C_12$

### 双重分组跳跃进位链

双重分组：n位全加器分若干大组，大足中又包含若干小组。每个大组中小组的最高进位同时产生。大组与大组之间采用串行进位。

以n=32为例
![20240228153927](../../attachment/png/Pasted%20image%2020240228153927.png)

### 双重分组跳跃进位链大组进位分析

以第8小组为例$C_3=d_3+t_3C_{2}=\underbrace{d_3+t_3d_2+t_3t_2d_1+t_3t_2t_1d_0}_{D_8}+\underbrace{t_3t_2t_1t_0}_{T_8}C_{-1}=D_8+T_8C_{-1}$

- $D_8$：小组的本地进位，与外来进位无关
- $T_8$：小组的传送条件，与外来进位无关，传递外来进位
同理
- 第7小组：$C_7=D_7+T_7C_3$
- 第6小组：$C_11=D_6+T_6C_7$
- 第5小组：$C_15=D_5+T_5C_11$

进一步展开得到
$$
\begin{eqnarray}
C_3&=&D_8+T_8C_{-1}\\
C_7&=&D_7+T_7C_3=D_7+T_7D_8+T_7T_8C_{-1}\\
C_{11}&=&D_6+T_6C_7=D_6+T_6D_7+T_6T_7D_8+T_6T_7T_8C_{-1}\\
C_{16}&=&D_5+T_5C_{11}=D_5+T_5D_6+T_5T_6D_7+T_5T_6T_7D_8+T_5T_6T_7T_8C_{-1}
\end{eqnarray}
$$

### 双重分组跳跃进位链的***大组***进位线路

以第2大组为例
![20240228161229](../../attachment/png/Pasted%20image%2020240228161229.png)

### 双重分组跳跃进位链的***小组***进位线路

以第8小组为例，只产生*低3位*的进位和本小组$D_8T_8$
![20240228161453](../../attachment/png/Pasted%20image%2020240228161453.png)

### n=16双重分组跳跃进位链

![20240228161837](../../attachment/png/Pasted%20image%2020240228161837.png)

- 当$d_i,t_i$和$C_{-1}$形成后
  - 经$2.5t_y$ 产生$C_2, C_1, C_0, D_5\sim D_8, T_5\sim T_8$
  - 经$5t_y$产生$C_15, C_11, C_7, C_3$
  - 经$7.5t_y$产生$C_{14}\sim C_{12}, C_{10}\sim C_8, C_6\sim C_4$
- 串行进位链 经$32t_y$产生 全部进位
- 单重分组跳跃进位链 经$10t_y$产生 全部进位

### n=32双重分组跳跃进位链

![20240228162714](../../attachment/png/Pasted%20image%2020240228162714.png)
当$d_i,t_i$和$C_{-1}$形成后

- 经$2.5t_y$ 产生$C_2, C_1, C_0, D_1\sim D_8, T_1\sim T_8$
- 经$5t_y$产生$C_15, C_11, C_7, C_3$
- 经$7.5t_y$产生$C_{18}\sim C_{16}, C_{14}\sim C_{12}, C_{10}\sim C_{8}, C_{6}\sim C_4, C_{31}, C_{27}, C_{23}, C_{19}$
- 经$10t_y$产生$C_{30}\sim C_{28}, C_{26}\sim C_{24}, C_{22}\sim C_{20}$
